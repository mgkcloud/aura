{% schema %}
{
  "name": "Voice AI Assistant",
  "target": "body",
  "stylesheet": "voice-assistant.css",
  "javascript": "loader.js",
  "settings": [
    {
      "type": "checkbox",
      "id": "enabled",
      "label": "Enable Voice Assistant",
      "default": true
    },
    {
      "type": "select",
      "id": "position",
      "label": "Assistant Position",
      "options": [
        {
          "value": "bottom-right",
          "label": "Bottom Right"
        },
        {
          "value": "bottom-left",
          "label": "Bottom Left"
        }
      ],
      "default": "bottom-right"
    },
    {
      "type": "color",
      "id": "assistant_color",
      "label": "Assistant Color",
      "default": "#000000"
    }
  ]
}
{% endschema %}

<script>
  // Store the full bundle URL in a global variable
  window.voiceAssistantBundleUrl = "{{ 'bundle.js' | asset_url }}";
</script>

{% comment %} Render the main UI snippet {% endcomment %}
{% render 'voice-assistant', block_settings: block.settings %}

{% comment %}
  REMOVED Manual Script Loading Block
{% endcomment %}